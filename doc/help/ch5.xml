<chapter xml:id="ch5">
	<title>Описание работы с конфигуратором</title>
	<para>Как и говорилось выше, конфигуратор предназначен для выполнения различных административных действий над клиентами и над некоторыми параметрами сервера.</para>
	<para>
        Общий вид окна конфигуратора при работе показан ниже:
        <mediaobject>
            <imageobject>
                <imagedata fileref="images/sgconfig-main.png" format="PNG"/>
            </imageobject>
        </mediaobject>
    </para>
	<para>В окне расположены: меню, кнопки быстрого доступа к элементам меню, таблица с информацией о клиентах, панель с дополнительной информацией о клиенте, панель состояния. Следует помнить что почти все команды, вызываемые из конфигуратора будут работоспособны в случае успешного входа на сервер. При этом в панели состояния изменится статус, и появиться имя пользователя, который вошел в систему:
	<mediaobject>
            <imageobject>
                <imagedata fileref="images/username.png" format="PNG"/>
            </imageobject>
        </mediaobject>
	</para>
	<para>Обзор меню:</para>
	<itemizedlist mark="opencircle">
		<listitem><para>Файл — Сохранить — команда сохраняет таблицу с клиентами в указанный текстовый файл по указанному пути.</para></listitem>
		<listitem><para>Файл — Login… — команда, предназначенная для доступа на сервер. При этом выведется следующее окно, в котором необходимо ввести учетные данные администратора, как они заданы при вводе администратора:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/login.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>В случае успешного входа конфигуратор отобразит список клиентов, и даст, в зависимости от ограничений администратора доступ к функциям. После первой установки и старта системы, по-умолчанию логин и пароль на вход равны admin и 123456 соответственно.</para>
		</listitem>
		<listitem><para>Файл — Logout… — команда, выполняющая выход из системы, при этом таблица клиентов очищается.</para></listitem>
		<listitem><para>Файл — Печатать всех… — команда выводит предварительный просмотр списка клиентов с указанием трафика по направлениям.</para></listitem>
		<listitem><para>Файл — Выход — выполняет выход из системы и закрытие окна конфигуратора.</para></listitem>
		<listitem><para>Правка — Редактировать пользователя... — команда предназначена редактирования данных клиента (дублируется кнопкой
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/user-key.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		), при её вызове будет вызвано следующее окно:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/data-editor.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>В данном окне отображаются все настройки клиента, так как они будут записаны в конфигурационный файл. Опции и настройки данного окна описаны выше. Все числовые величины должны разделяться только знаком «.» (точка), IP адреса разделяются символом «,» (запятая), если клиенту необходимо иметь доступ с любого IP адреса, то в это поле необходимо занести символ * (звёздочка). В нижней части окна расположена индивидуальная статистика клиента, её можно изменять, для этого необходимо два раза щелкнуть на подлежащему изменению числе, после редактирование подтвердить изменение кнопкой «Enter». Кнопка «?» предназначена для автоматического поиска свободного IP адреса из указанного в настройках диапазона:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/ip-search.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Признак «Заморожен» предназначен для того, чтобы на определенное время прекратить любые денежные действия со счетом клиента, при установке этого признака со счета клиента снимается сумма, указанная в тарифе. Для того чтобы увидеть пароль клиента, сгенерированный кнопкой «Сгенерировать пароль», необходимо нажать на кнопку «Показать пароль», при этом в первом окне пароля отобразится текущий пароль (через 10 секунд он сам исчезнет снова). Следует помнить что при записи пароли и в первом поле ввода и во втором должны совпадать, иначе система выведет предупреждение и не даст записать данные на клиента. Если данные после изменения успешно записаны, то будет выведено сообщение:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/information.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>В случае изменения тарифа будет выведен вопрос о времени перевода клиента на новый вид тарифа:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/change-in-tariff-user.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Если был выбран вариант «Немедленно», то тариф применится к клиентскому аккаунту немедленно, иначе в случае выбора варианта «В следующем месяце» тариф применится с 1 числа следующего месяца автоматически, при этом строка с клиентом, у которого изменится тариф примет вид:
		<mediaobject>
            <imageobject>
                <imagedata fileref="images/tariff.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Т. е. в колонке «Тариф» появится запись двойного тарифа, где перед знаком «/» находится текущий, а после – тот тариф, который будет применен со следующего месяца. Следует учитывать что при переходе на другой тариф в течении месяца (выбрана опция «Немедленно») система пересчитает средства на счёте следующим образом: если в тарифе есть абонплата, то с переходом на новый тариф с клиента будет снята часть абонплаты от того тарифа с которого переходят и в конце месяца с него будет снята часть абонплаты от того тарифа на который перевели. Аналогично клиент получит только часть бесплатных Мб от того тарифа на который его перевели.</para>
		</listitem>
		<listitem><para>Правка - Добавить пользователя... – команда, позволяющая добавить нового клиента в систему (дублируется кнопкой
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/new-customer.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		). При вызове этой команды будет выведено окно для заполнения свойств клиента:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/create-new-user.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Обязательными к заполнению являются поля: логин, пароль и его подтверждение, IP-адрес(а), тарифный план. Остальные поля и опции  являются необязательными. В случае если какой то обязательный параметр не заполнен, система сообщит об ошибке и предложит ввести недостающие данные, если же все данные указаны верно, то система запишет нового клиента в систему. Также при добавлении нового клиента система выставит количество бесплатных Мб которое стоит в тарифе, установленном клиенту, пропорционально времени оставшемуся до обнуления статистики. Также с клиента будет снята абонаплата выставленная в тарифе пропорционально времени до конца месяца.</para>
		</listitem>
		<listitem><para>Правка - Удалить пользователя... – команда позволяющая удалить клиента из системы, при этом все клиентские настройки не удаляются физически на сервере, а переносятся в специальную папку /deleted_users.Команда дублируется кнопкой
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/delete-user.png" format="PNG"/>
            </imageobject>
        </mediaobject>.
		При вызове этой команды будет вызвано подтверждение на удаление:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/confirm-delete-user.png" format="PNG"/>
            </imageobject>
        </mediaobject>.
		</para>
		</listitem>
		<listitem><para>Правка – Тарифные планы... – команда вызывающая редактор тарифных планов (дублируется кнопкой 
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/tariff-plans.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		):
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/editor-rate-plans.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Цены вводятся через знак «/» - это разделение цены до/после перехода порога по направлению, если цена будет введена без знака «/», то она будет применена как к трафику до, так и после превышения одинаково. Порог устанавливается в поле «Порог (Мб)», если установлен признак «Без порога», то цена вводиться одна. В стоимость заморозки устанавливается сумма, которая будет снята с клиента при установке признака «Заморожен».</para>
		<para>После изменения тарифного плана необходимо нажать кнопку «Сохранить» для записи данных. Измененный тарифный план начинает применяться сразу после записи.</para>
		</listitem>
		<listitem><para>Правка – Администраторы – команда, позволяющая изменять права администраторов и добавлять/удалять их. Дублируется кнопкой
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/key-admin.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		, при вызове команды будет выдано окно со списком текущих администраторов:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/administrators.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Пароль и подтверждение пароля в целях безопасности не отображаются, при записи если оставить незаполненными поля пароля, то он изменен не будет. Для сохранения сделанных изменений необходимо нажать кнопку «Сохранить». В случае успешного сохранения данных администратора будет выведено сообщение:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/inform-admin.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Если имела место какая-либо ошибка, сервер сообщит об ней.</para>
		</listitem>
		<listitem><para>Инструменты - Статистика – команда отображает общую статистику по направлениям, с визуальным обзором на диаграмме:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/statistics.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>При выборе вариантов внизу соответственно будет перерисована диаграмма. Также можно указать по каким клиентам показывать суммарную статистику: по всем или только по отфильтрованным, и какую собственно на диаграмме прорисовывать статистику.</para>
		</listitem>
		<listitem><para>Инструменты – Фильтр – команда позволяет отфильтровать текущую таблицу с данными о клиентах по заданному фильтру:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/filter.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		</listitem>
		<listitem><para>Инструменты - Разослать письма... – команда позволяет разослать письма указанным клиентам с сервера:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/notification-letters.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>В поля From, Subject заносятся электронный адрес отправителя и тема писем соответственно.</para>
    <para>Кнопка «Все» позволяет выделить всех клиентов из списка, «Никто» - убирает выделение со всех в списке, «Должники» - выделяет клиентов, у которых баланс меньше нуля и превысил «Кредит», «Инверсия» - позволяет инвертировать выделение, т. е. все кто был помеченными станут непомеченными и наоборот. Кнопки «Загрузить шаблон» и «Сохранить шаблон» позволяют загружать исходный и сохранять текущий шаблоны соответственно. В «Подстановках» можно выбрать спец. Макросы, которые потом при отправке каждому клиенту заменяться на реальные для него цифры или информацию. Пример сохраненного шаблона:</para>
<programlisting numbering="unnumbered">
		admin@my.net
Состояние счета
Уважаемый пользователь %name!

По состоянию на %date %time на вашем счету осталось %cash у.е.

Перекачано по миру %udload0
Перекачано по городу %udload1

С уважением, администрация сети my.net
</programlisting>
		<para>Кнопка «Просмотр» позволяет просмотреть итоговое сообщение для выбранного клиента:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/view-letter.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Следует помнить что для корректной рассылки писем в настройках необходимо указать SMTP сервер. Рассылка писем предусматривает сохранение и восстановление шаблонов.</para>
		</listitem>
		<listitem><para>Инструменты – Отправить сообщение – команда предназначена для отправки сообщений клиентам, в данный момент находящимся в OnLine или в OffLine (следует учитывать, что сообщение дойдет моментально только лишь в том случае, если клиент пользуется в данный момент авторизатором, если же клиент в данный момент находится в состоянии OffLine, то сообщение дойдет сразу же после первого подключения):
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/send-message.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>При отправке сообщения можно задать пользователей, которым уйдет сообщение, интервал повторения сообщения в минутах, количество повторений, а также время в секундах, в течении которого окно с сообщением будет держаться на экране у пользователя.</para>
		</listitem>
		<listitem><para>Инструменты – Очистить таблицу пользователей – команда позволяет очистить таблицу клиентов и их статистики, однако следует понимать что таблица очищается только в окне конфигуратора, никакие данные на сервере изменены не будут.</para></listitem>
		<listitem><para>Настройки – Настройки... – команда вызывает окно с настройками конфигуратора (дублируется кнопкой
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/key-settingsconfig.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		):</para>
		<para>
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/network-settings.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>В данном окне задаются настройки конфигуратора: адрес сервера, порт, адрес почтового сервера и его порт, интервал авто обновления, длина генерируемого пароля и прочие параметры конфигуратора. На закладке «Интерфейс»
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/interface.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		задаются: видимость колонок в окне клиентов, а так же ширина. Признак «Загружать последний шаблон» определяет загружать ли конфигуратору последний шаблон, который был использован при последней отправке писем клиентам.</para>
		<para>На закладке «Раскраска» можно задать цвета, шрифт и другие параметры отображения в основной таблице и в панели информации.
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/coloring.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>На закладке «Прочее» можно указать, сохранять ли логин и (или) пароль администратора. Пароль шифруется и привязывается к HDD компьютера, однако, НЕ РЕКОМЕНДУЕТСЯ сохранять пароль администратора !!! Также здесь можно задать имена полей типа UserDataN для отображения в конфигураторе и параметры, которые будут показываться в нижней панели информации. В разделе «Подсети и IP–адреса» можно задать имя и начальный адрес для автоматического поиска свободного IP адреса.
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/other-settings.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		</listitem>
		<listitem><para>Настройки – Информация о сервере – команда позволяет узнать некоторую информацию о сервере, о его версии и некоторые другие данные:
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/informserver.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		</para>
		<para>Кнопка
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/update.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		позволяет обновить данные о клиентах в таблице.</para>
		<para>Кнопка
		<mediaobject>
            <imageobject>
              <imagedata fileref="images/autoupdate.png" format="PNG"/>
            </imageobject>
        </mediaobject>
		позволяет включать или отключать авто обновление данных. В настройках конфигуратора можно задать интервал авто обновления.</para>
		</listitem>
	</itemizedlist>
</chapter>
